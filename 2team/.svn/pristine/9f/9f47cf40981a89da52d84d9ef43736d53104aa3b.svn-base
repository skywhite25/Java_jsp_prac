<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<!-- jQuery 라이브러리 등록 - CDN방식 -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script type="text/javascript">
var appendStr = "<div>이미지 첨부 : <input type='file' name='img'>"
				+ "<button type='button' class='removeBtn'>제거</button>"
				+ "</div>";
$(function(){
	var fileCnt = 1;
	// 이벤트 처리
	// 이미지 첨부 한 줄 추가 버튼
	$("#appendImageBtn").click(function(){
		//alert("이미지 추가클릭");
		
		// 파일의 갯수가 10개이면 창 출력
		if(fileCnt == 10) {
			alert("파일 첨부는 10개까지 가능합니다.");
			return;
		}
		$("#imageDiv").append(appendStr);
		fileCnt++;
	});
	
	// 이미지 첨부 한 줄 제거하기 버튼
	// 이벤트를 넣는 과정에서 removeBtn이 처음(이벤트를 넣은 때)에는 존재하지 않기 때문에 뒤에 나오는 removeBtn은 이벤트가 적용되지 않는다.
	// 그래서 on함수를 사용한다.
	/*
	$(".removeBtn").click(function(){
		alert("첨부파일 제거");
	});
	*/
	
	// $(selector).on(이벤트, 이벤트 처리할 새로 만든 selector, function(){~~}
	$("#imageDiv").on("click", ".removeBtn", function(){
		//alert("첨부파일 제거");
		$(this).closest("div").remove();
		fileCnt--;
	});
});
</script>

</head>


<body>
<!-- 파일 첨부가 있는 것은 post방식 사용 -->
<form action="#" method="post">
제목 : <input name="title"><br/>
<button type="button" id="appendImageBtn">이미지 추가</button>
<div id="imageDiv">
	<div>
		이미지 첨부 : <input type="file" name="img">
	</div>
</div>
</form>
</body>
</html>